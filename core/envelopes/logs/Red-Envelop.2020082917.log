time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:34)] Initializing starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:34"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*PropsStarter).Init(base/props.go:23)] 初始化配置." func="github.com/catwithtudou/red-envelope-infra/base.(*PropsStarter).Init" file="base/props.go:23"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:45)] Setup starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:45"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup(base/dbx.go:33)] mysql.conn url:root:***@tcp(127.0.0.1:3306)/red_envelope?parseTime=true&charset=utf8&loc=Local&" func="github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup" file="base/dbx.go:33"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup(base/dbx.go:38)] <nil>" func="github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup" file="base/dbx.go:38"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:07:06+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:57)] Starting starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:57"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:07:06+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:07:06+08:00" level=debug msg="[red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired(envelopes/domain_refund.go:46)] 过期红包退款开始：{Id:1323 EnvelopeNo:1gkqZnvIS7YW1QR1MjQ1oFxakAL EnvelopeType:1 Username:{String:测试账户10 Valid:true} UserId:1fM21rA58Nlm954VXFDZ1oZQsLI Blessing:{String:祝你幸福 Valid:true} Amount:600 AmountOne:60 Quantity:10 RemainAmount:540 RemainQuantity:9 ExpiredAt:2020-08-29 10:43:15 +0800 CST Status:1 OrderType:1 PayStatus:0 CreatedAt:2020-08-29 10:43:15.571 +0800 CST UpdatedAt:2020-08-29 17:00:27.344 +0800 CST OriginEnvelopeNo:}" func="red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired" file="envelopes/domain_refund.go:46"
time="2020-08-29T17:07:06+08:00" level=info msg="[red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1(accounts/domain_account.go:133)] 1" func="red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1" file="accounts/domain_account.go:133"
time="2020-08-29T17:07:06+08:00" level=info msg="[red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1(accounts/domain_account.go:142)] {10000020200730010000000000000001 10001 }" func="red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1" file="accounts/domain_account.go:142"
time="2020-08-29T17:07:06+08:00" level=debug msg="[red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired(envelopes/domain_refund.go:52)] 过期红包退款结束：{Id:1323 EnvelopeNo:1gkqZnvIS7YW1QR1MjQ1oFxakAL EnvelopeType:1 Username:{String:测试账户10 Valid:true} UserId:1fM21rA58Nlm954VXFDZ1oZQsLI Blessing:{String:祝你幸福 Valid:true} Amount:600 AmountOne:60 Quantity:10 RemainAmount:540 RemainQuantity:9 ExpiredAt:2020-08-29 10:43:15 +0800 CST Status:1 OrderType:1 PayStatus:0 CreatedAt:2020-08-29 10:43:15.571 +0800 CST UpdatedAt:2020-08-29 17:00:27.344 +0800 CST OriginEnvelopeNo:}" func="red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired" file="envelopes/domain_refund.go:52"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:34)] Initializing starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:34"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*PropsStarter).Init(base/props.go:23)] 初始化配置." func="github.com/catwithtudou/red-envelope-infra/base.(*PropsStarter).Init" file="base/props.go:23"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:45)] Setup starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:45"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup(base/dbx.go:33)] mysql.conn url:root:***@tcp(127.0.0.1:3306)/red_envelope?charset=utf8&loc=Local&parseTime=true&" func="github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup" file="base/dbx.go:33"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup(base/dbx.go:38)] <nil>" func="github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup" file="base/dbx.go:38"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:14:43+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:57)] Starting starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:57"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:14:43+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register(infra/starer.go:78)] Register starter: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*starterRegister).Register" file="infra/starer.go:78"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:34)] Initializing starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:34"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*PropsStarter).Init(base/props.go:23)] 初始化配置." func="github.com/catwithtudou/red-envelope-infra/base.(*PropsStarter).Init" file="base/props.go:23"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).init(infra/boot.go:37)] Initializing: PriorityGroup=20,Priority=10000,type=*base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).init" file="infra/boot.go:37"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:45)] Setup starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:45"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup(base/dbx.go:33)] mysql.conn url:root:***@tcp(127.0.0.1:3306)/red_envelope?loc=Local&charset=utf8&parseTime=true&" func="github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup" file="base/dbx.go:33"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup(base/dbx.go:38)] <nil>" func="github.com/catwithtudou/red-envelope-infra/base.(*DbxDatabaseStarter).Setup" file="base/dbx.go:38"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup(infra/boot.go:48)] Setup: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).setup" file="infra/boot.go:48"
time="2020-08-29T17:47:11+08:00" level=info msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:57)] Starting starters..." func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:57"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.PropsStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.DbxDatabaseStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:47:11+08:00" level=debug msg="[github.com/catwithtudou/red-envelope-infra.(*BootApplication).start(infra/boot.go:61)] Starting: *base.ValidatorStarter" func="github.com/catwithtudou/red-envelope-infra.(*BootApplication).start" file="infra/boot.go:61"
time="2020-08-29T17:47:11+08:00" level=debug msg="[red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired(envelopes/domain_refund.go:46)] 过期红包退款开始：{Id:1601 EnvelopeNo:1glcE2mAQr9mloveQz70kd7sqEa EnvelopeType:1 Username:{String:测试账户10 Valid:true} UserId:1fM21rA58Nlm954VXFDZ1oZQsLI Blessing:{String:祝你幸福 Valid:true} Amount:600 AmountOne:60 Quantity:10 RemainAmount:480 RemainQuantity:8 ExpiredAt:2020-08-29 17:15:04 +0800 CST Status:1 OrderType:0 PayStatus:0 CreatedAt:2020-08-29 17:15:04.585 +0800 CST UpdatedAt:2020-08-29 17:46:58.944 +0800 CST OriginEnvelopeNo:}" func="red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired" file="envelopes/domain_refund.go:46"
time="2020-08-29T17:47:11+08:00" level=info msg="[red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1(accounts/domain_account.go:134)] 1" func="red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1" file="accounts/domain_account.go:134"
time="2020-08-29T17:47:11+08:00" level=info msg="[red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1(accounts/domain_account.go:148)] {10000020200730010000000000000001 10001 }" func="red-envelope/core/accounts.(*accountDomain).TransferWithContextTx.func1" file="accounts/domain_account.go:148"
time="2020-08-29T17:47:11+08:00" level=debug msg="[red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired(envelopes/domain_refund.go:52)] 过期红包退款结束：{Id:1601 EnvelopeNo:1glcE2mAQr9mloveQz70kd7sqEa EnvelopeType:1 Username:{String:测试账户10 Valid:true} UserId:1fM21rA58Nlm954VXFDZ1oZQsLI Blessing:{String:祝你幸福 Valid:true} Amount:600 AmountOne:60 Quantity:10 RemainAmount:480 RemainQuantity:8 ExpiredAt:2020-08-29 17:15:04 +0800 CST Status:1 OrderType:0 PayStatus:0 CreatedAt:2020-08-29 17:15:04.585 +0800 CST UpdatedAt:2020-08-29 17:46:58.944 +0800 CST OriginEnvelopeNo:}" func="red-envelope/core/envelopes.(*ExpiredEnvelopeDomain).Expired" file="envelopes/domain_refund.go:52"
